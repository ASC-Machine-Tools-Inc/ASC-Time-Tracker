@using ChartJSCore.Models
@model IEnumerable<TimeLog>
<!-- Filler text to show for no time logs.-->
@if (Model.Any())
{
    <div class="row text-center justify-content-center">
        <div class="col-8 mt-3 mb-5">
            <strong>
                Top
                <select id="pieChartNumSelect"
                        class="form-select d-inline w-auto mx-1"
                        aria-label="Top X select">
                    <option value="3">3</option>
                    <option value="5">5</option>
                    <option value="10">10</option>
                </select>
                Job Numbers by Hours Spent
            </strong>

            <canvas id="timeSpentChart"></canvas>
        </div>
        <!-- Update when ChartJsCore is updated -->
        <div class="col-12" style="display: none;">
            <strong>Weekly Summary</strong>
            <canvas id="weekBarChart"></canvas>
        </div>
    </div>

}

@{
    // Workaround for getting scripts in partial view - if controller returns
    // a valid chart in the ViewData, we draw it.
    Chart timeSpentChart = (Chart)ViewData["TimeSpentChart"];
    if (timeSpentChart != null)
    {
        <script>
            @Html.Raw(timeSpentChart.CreateChartCode("timeSpentChart"))
        </script>
    }

    Chart weekBarChart = (Chart)ViewData["WeekBarChart"];
    if (weekBarChart != null)
    {
        <script>
            @Html.Raw(weekBarChart.CreateChartCode("weekBarChart"))
        </script>
    }

}